<!-- Load highlight.js asynchronously -->
<script>
// Defer highlight.js loading until after page content is rendered
document.addEventListener('DOMContentLoaded', function() {
  // Only load highlight.js if there are code blocks on the page
  if (document.querySelector('pre code')) {
    const highlight = document.createElement('script');
    highlight.src = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js';
    highlight.integrity = 'sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=';
    highlight.crossOrigin = 'anonymous';
    highlight.onload = function() {
      // Load language files only if needed
      {{ range site.Params.highlight_languages }}
      const langScript = document.createElement('script');
      langScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/{{ . }}.min.js';
      document.head.appendChild(langScript);
      {{ end }}
      
      // Initialize highlighting after all language scripts are loaded
      setTimeout(function() {
        hljs.initHighlighting();
      }, 200);
    };
    document.head.appendChild(highlight);
  }
});
</script>

<!-- Remove console.log statements in production -->
<script>
if (window.console && typeof window.location !== 'undefined' && 
    window.location.hostname !== 'localhost' && 
    window.location.hostname !== '127.0.0.1') {
  console.log = function() {};
  console.info = function() {};
  console.debug = function() {};
}
</script>